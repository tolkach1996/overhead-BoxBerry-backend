import{_ as w,o as _,c as u,a as e,b as B,H as E,p as m,I as F,J as x,e as q,t as a,u as t,F as y,A as z,K as R,E as W,G as j,d as b,v as f,x as g,i as A,z as p}from"./index-9516f0ee.js";import{L as G}from"./Loader-21cee0a6.js";const H={},J={class:"message"},K={class:"message__title"},U={class:"message__image"};function Q(s,o){return _(),u("div",J,[e("div",K,[B(s.$slots,"title",{},void 0,!0)]),e("div",U,[B(s.$slots,"content",{},void 0,!0)])])}const C=w(H,[["render",Q],["__scopeId","data-v-7b0858ae"]]),X="/assets/scanner-314ee725.svg",Y="/assets/sadSearch-4fccdd86.svg",Z=s=>{if(!s)return"номер телефона";const o=s.replace(/\D/g,"");return`+7 ${o.substring(1,4)} ${o.substring(4,7)}-${o.substring(7,9)}-${o.substring(9)}`},ee=s=>s?new Date(s).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"дата",S=s=>Number(s).toFixed(2),L=E("notice",()=>{const s=m(!1),o=m(""),r=m(null);function c(h){r.value&&clearTimeout(r.value),h&&(i(),o.value=h,r.value=setTimeout(()=>{d(),clearTimeout(r.value)},3e3))}function d(){s.value=!1}function i(){s.value=!0}return{show:s,textMessage:o,setText:c,close:d,open:i}});const v=s=>(W("data-v-897e7af9"),s=s(),j(),s),se=v(()=>e("h1",null,"Выдача заказа",-1)),te={class:"order"},oe={class:"order__column order__column_size_fixed"},re={class:"card"},ae=v(()=>e("span",{class:"card__name"},"Клиент",-1)),ce={class:"user"},_e=v(()=>e("div",{class:"user__avatar"},null,-1)),de={class:"user-info"},ne={class:"user-info__name"},ie={class:"user-info__phone"},le={class:"card"},ue={class:"card-order__header"},ve={class:"card-order__row card-order__row_vertical"},he=v(()=>e("div",{class:"card-order__title"},"Заказ №",-1)),fe={class:"card-order__num-status"},ge={class:"card-order__number"},be={class:"card-order__status"},me={class:"card-order__row"},pe={class:"card-order__sub-title"},Se={class:"card-order__comment"},ye=v(()=>e("div",{class:"card-order__title"},"Комментарий",-1)),we={class:"card-order__text"},xe={class:"card-order__action"},$e=["disabled"],ke=["disabled"],Ne={class:"order__column"},Ie={class:"order-table"},Te=R('<div class="order-table__row order-table__row_header" data-v-897e7af9><div class="order-table__col" data-v-897e7af9>Наименование товара</div><div class="order-table__col order-table__col_align_right" data-v-897e7af9>Стоимость</div><div class="order-table__col order-table__col_align_center" data-v-897e7af9>Количество</div><div class="order-table__col order-table__col_align_right" data-v-897e7af9>Сумма</div></div>',1),Oe={class:"order-table__col"},De={class:"order-table__col order-table__col_align_right"},Pe={class:"order-table__col order-table__col_align_center"},Ve={class:"order-table__col order-table__col_align_right"},Be={class:"order__summary"},Ce=v(()=>e("span",null,"ИТОГО",-1)),Fe={__name:"Order",props:{order:Object},setup(s){const o=s,r=F(),{loading:c,textError:d}=x(r),i=L(),h=q(()=>o.order.positions.rows.reduce((l,N)=>l+=$(N),0));function $(l){return((l==null?void 0:l.price)||0)*l.quantity/100}async function M(){await r.updateOrder(o.order.id),d.value?i.setText(`Ошибка! ${d.value}`):(k(),i.setText("Успешно!"))}function k(){r.newScaning()}return(l,N)=>{var I,T,O,D,P;return _(),u(y,null,[se,e("div",te,[e("div",oe,[e("div",re,[ae,e("div",ce,[_e,e("div",de,[e("div",ne,a((I=s.order.agent)==null?void 0:I.name),1),e("div",ie,a(t(Z)((T=s.order.agent)==null?void 0:T.phone)),1)])])]),e("div",le,[e("div",ue,[e("div",ve,[he,e("div",fe,[e("span",ge,a(s.order.name),1),e("div",be,a((O=s.order.state)==null?void 0:O.name),1)])]),e("div",me,[e("div",pe,"Дата заказа: "+a(t(ee)((D=s.order)==null?void 0:D.created)),1)])]),e("div",Se,[ye,e("div",we,a(s.order.description),1)]),e("div",xe,[e("button",{class:"card__button card__button_filed",onClick:M,disabled:t(c)},a(t(c)?"Загрузка":"Выдать заказ"),9,$e),e("button",{class:"card__button card__button_outline",onClick:k,disabled:t(c)},a(t(c)?"Загрузка":"Новое сканирование"),9,ke)])])]),e("div",Ne,[e("div",Ie,[Te,(_(!0),u(y,null,z((P=s.order.positions)==null?void 0:P.rows,n=>{var V;return _(),u("div",{class:"order-table__row",key:n.id},[e("div",Oe,a((V=n.assortment)==null?void 0:V.name),1),e("div",De,a(t(S)(((n==null?void 0:n.price)||0)/100)),1),e("div",Pe,a(n==null?void 0:n.quantity),1),e("div",Ve,a(t(S)($(n))),1)])}),128))]),e("div",Be,[Ce,e("span",null,a(t(S)(h.value)),1)])])])],64)}}},Le=w(Fe,[["__scopeId","data-v-897e7af9"]]);const Me={key:0,class:"notice"},Ee={__name:"Notice",setup(s){const o=L(),{show:r,textMessage:c}=x(o);return(d,i)=>t(r)?(_(),u("div",Me,a(t(c)),1)):b("",!0)}},qe=w(Ee,[["__scopeId","data-v-c363ea21"]]),ze=["src"],Re=e("br",null,null,-1),We=["src"],Ge={__name:"IssueOrdersPage",setup(s){const o=F(),{order:r,loading:c,notFound:d}=x(o);return(i,h)=>(_(),u(y,null,[!t(r)&&!t(d)&&!t(c)?(_(),f(C,{key:0},{title:g(()=>[p("Начните сканирование для просмотра заказа")]),content:g(()=>[e("img",{src:t(X),alt:""},null,8,ze)]),_:1})):t(d)?(_(),f(C,{key:1},{title:g(()=>[p("Товар не найден!"),Re,p("Начните новое сканирование")]),content:g(()=>[e("img",{src:t(Y),alt:""},null,8,We)]),_:1})):b("",!0),t(r)?(_(),f(Le,{key:2,order:t(r)},null,8,["order"])):b("",!0),!t(r)&&t(c)?(_(),f(G,{key:3})):b("",!0),A(qe)],64))}};export{Ge as default};
