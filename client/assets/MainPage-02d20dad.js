import{s as te,R as le,r as ne,w as V,o as i,c as p,a as h,m as B,b as ae,d as T,n as P,t as r,_ as q,e as F,f as J,g as W,h as G,i as l,u as t,j as Z,k as K,l as se,p as j,q as oe,v as O,x as a,y as Y,F as U,z as A,A as c,B as E,C as ue,D as ie,E as de,G as re}from"./index-0c9e383d.js";import{C as s,R as N,E as ce,S as pe,T as _e}from"./Save-b499cbdd.js";/* empty css                                                                   */var z={name:"ToggleButton",extends:te,emits:["update:modelValue","change","click","focus","blur"],props:{modelValue:Boolean,onIcon:String,offIcon:String,onLabel:{type:String,default:"Yes"},offLabel:{type:String,default:"No"},iconPos:{type:String,default:"left"},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},outsideClickListener:null,data(){return{focused:!1}},mounted(){this.bindOutsideClickListener()},beforeUnmount(){this.unbindOutsideClickListener()},methods:{onClick(u){this.disabled||(this.$emit("update:modelValue",!this.modelValue),this.$emit("change",u),this.$emit("click",u),this.focused=!0)},onFocus(u){this.focused=!0,this.$emit("focus",u)},onBlur(u){this.focused=!1,this.$emit("blur",u)},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=u=>{this.focused&&!this.$refs.container.contains(u.target)&&(this.focused=!1)},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}},computed:{buttonClass(){return["p-button p-togglebutton p-component",{"p-focus":this.focused,"p-button-icon-only":this.hasIcon&&!this.hasLabel,"p-disabled":this.disabled,"p-highlight":this.modelValue===!0}]},iconClass(){return[this.modelValue?this.onIcon:this.offIcon,"p-button-icon",{"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label}]},hasLabel(){return this.onLabel&&this.onLabel.length>0&&this.offLabel&&this.offLabel.length>0},hasIcon(){return this.$slots.icon||this.onIcon&&this.offIcon},label(){return this.hasLabel?this.modelValue?this.onLabel:this.offLabel:"&nbsp;"}},directives:{ripple:le}};const he=["id","checked","value","aria-labelledby","aria-label"];function fe(u,o,_,S,k,f){const v=ne("ripple");return V((i(),p("div",B({ref:"container",class:f.buttonClass,onClick:o[2]||(o[2]=C=>f.onClick(C))},u.ptm("root")),[h("span",B({class:"p-hidden-accessible"},u.ptm("hiddenInputWrapper")),[h("input",B({id:_.inputId,type:"checkbox",role:"switch",class:_.inputClass,style:_.inputStyle,checked:_.modelValue,value:_.modelValue,"aria-labelledby":u.ariaLabelledby,"aria-label":u.ariaLabel,onFocus:o[0]||(o[0]=C=>f.onFocus(C)),onBlur:o[1]||(o[1]=C=>f.onBlur(C))},{..._.inputProps,...u.ptm("hiddenInput")}),null,16,he)],16),ae(u.$slots,"icon",{value:_.modelValue,class:P(f.iconClass)},()=>[_.onIcon||_.offIcon?(i(),p("span",B({key:0,class:f.iconClass},u.ptm("icon")),null,16)):T("",!0)]),h("span",B({class:"p-button-label"},u.ptm("label")),r(f.label),17)],16)),[[v]])}z.render=fe;const ge={class:"search"},ve={class:"search__item"},be={class:"search__item"},me={__name:"Search",setup(u){const{fetchFilter:o,searchData:_,filterProject:S,selectedFilterProjects:k,filterStatus:f,selectedFilterStatus:v,isLoadingSearch:C,declaredModel:x,openingModel:L,orders:y}=K,M=F(()=>!!y.value);return J(async()=>{await o()}),W(x,I=>{y.value&&(y.value=y.value.map(b=>(b.declaredStatus=I,b)))}),W(L,I=>{y.value&&(y.value=y.value.map(b=>(b.openingStatus=I,b)))}),(I,b)=>{const R=G("MultiSelect"),D=G("Button");return i(),p("div",ge,[h("div",ve,[l(R,{modelValue:t(k),"onUpdate:modelValue":b[0]||(b[0]=w=>Z(k)?k.value=w:null),options:t(S),filter:"",optionLabel:"name",placeholder:"Выберите проект",maxSelectedLabels:3,class:"prime__multiselect w-full md:w-20rem"},null,8,["modelValue","options"]),l(R,{modelValue:t(v),"onUpdate:modelValue":b[1]||(b[1]=w=>Z(v)?v.value=w:null),options:t(f),filter:"",optionLabel:"name",placeholder:"Выберите статус",maxSelectedLabels:3,class:"prime__multiselect w-full md:w-20rem"},null,8,["modelValue","options"]),l(D,{type:"button",label:"Найти",icon:"pi pi-search",class:"prime__button",onClick:t(_),loading:t(C)},null,8,["onClick","loading"])]),h("div",be,[l(t(z),{modelValue:t(x),"onUpdate:modelValue":b[2]||(b[2]=w=>Z(x)?x.value=w:null),onLabel:"Объявленная стоимость",offLabel:"Объявленная стоимость",onIcon:"pi pi-check",offIcon:"pi pi-times",class:"w-9rem",disabled:!M.value},null,8,["modelValue","disabled"]),l(t(z),{modelValue:t(L),"onUpdate:modelValue":b[3]||(b[3]=w=>Z(L)?L.value=w:null),onLabel:"Вскрытие при получении",offLabel:"Вскрытие при получении",onIcon:"pi pi-check",offIcon:"pi pi-times",class:"w-9rem",disabled:!M.value},null,8,["modelValue","disabled"])])])}}},ke=q(me,[["__scopeId","data-v-2f20bc73"]]);function ye(u,o){if(!u)return;const _=S=>{S.target==u.value||S.composedPath().includes(u.value)||typeof o=="function"&&o()};return J(()=>{window.addEventListener("click",_)}),se(()=>{window.removeEventListener("click",_)}),{listener:_}}const Se={},Ce={xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24"},we=h("path",{d:"M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"},null,-1),Ve=[we];function Le(u,o){return i(),p("svg",Ce,Ve)}const Pe=q(Se,[["render",Le]]),xe={},Ie={xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24"},Oe=h("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"},null,-1),Ee=[Oe];function Ue(u,o){return i(),p("svg",Ie,Ee)}const Me=q(xe,[["render",Ue]]),Be=[{id:"h1",text:""},{id:"h2",text:"№"},{id:"h3",text:"Номер заказа",key:"numberOrder"},{id:"h4",text:"Проект",key:"project"},{id:"h5",text:"ФИО",key:"fio"},{id:"h6",text:"Телефон",sort:!1,activeSort:!1,key:null},{id:"h7",text:"Сумма заказа",align:"right",key:"sumOrder"},{id:"h8",text:"Комментарий",key:"comment"},{id:"h9",text:"Дата посылки",key:"dataPackage"},{id:"h10",text:"Вид доставки",align:"center",key:"typeTransfer"},{id:"h11",text:"Вскрытие получаетелем",align:"center",key:"openingStatus"},{id:"h12",text:"Стоимость доставки",align:"right",key:"deliverySum"},{id:"h13",text:"Оплата доставки",align:"right",key:"paySum"},{id:"h14",text:"Объявленная стоимость",align:"right",key:"declaredSum"},{id:"h15",text:"Код пункта поступления",align:"center",key:"departurePointCode"},{id:"h16",text:"Код ПВЗ",key:"codePWZ",align:"center"},{id:"h17",text:"Вес 1 места (грамм)",key:"weightPackage"},{id:"h18",text:"Текст Ошибки"},{id:"h19",text:""},{id:"h20",text:""}];const $=u=>(de("data-v-8cbac76d"),u=u(),re(),u),Te=["onUpdate:modelValue"],$e={key:0},Re=["onUpdate:modelValue"],De={key:0},Ze=["onUpdate:modelValue"],je={key:0},Fe=["onUpdate:modelValue"],qe={key:0},Ae=["onUpdate:modelValue"],Ne={key:0},We=["onUpdate:modelValue"],ze={key:0},He=["onUpdate:modelValue"],Ge=["onClick"],Ye=$(()=>h("span",null,"Объявленная стоимость",-1)),Je=$(()=>h("span",null,"Вскрытие при получении",-1)),Ke=$(()=>h("div",{class:"table-menu__split"},null,-1)),Qe=$(()=>h("span",{class:"table-menu__icon pi pi-trash"},null,-1)),Xe=$(()=>h("span",null,"Удалить",-1)),et=[Qe,Xe],tt={__name:"TableOrders",setup(u){const{orders:o}=K,_=j(!1),S=j(!1),k=j(null),f=j(-1),v=oe({declaredStatus:F(()=>{var n;return f.value>-1&&((n=o.value[f.value])==null?void 0:n.declaredStatus)}),openingStatus:F(()=>{var n;return f.value>-1&&((n=o.value[f.value])==null?void 0:n.openingStatus)}),coordinates:{x:0,y:0},isOpen:!1}),C=F(()=>{var n;return{top:`${v.coordinates.y}px`,left:`${v.coordinates.x-((n=k==null?void 0:k.value)==null?void 0:n.offsetWidth)+24}px`}});function x(n){n.show=!n.show}function L(n,g=null){if(g!==null){const e=o.value[n].orders.splice(g,1);o.value[n].id===e[0].id&&Object.keys(o.value[n].orders[0]).map(m=>{o.value[n][m]=o.value[n].orders[0][m]}),o.value[n].orders.length===1&&(o.value[n].show=!1);return}o.value.splice(n,1)}function y(n,g=null){return g!==null?o.value[n].orders[g].isEdit=!o.value[n].orders[g].isEdit:o.value[n].isEdit=!o.value[n].isEdit}function M(n){return n.length>1?n.reduce((g,e)=>g+=e.sumOrder,0):n[0].sumOrder}function I(n,g){return g||n>1e4?n:5}function b(n){return n.reqStatus?n.reqStatus=="Ок"?"succefully":"warning":null}function R(n,g){const e=n.target.getBoundingClientRect();v.coordinates.x=e.x,v.coordinates.y=e.y,v.isOpen=!0,f.value=g}function D(){v.isOpen=!1}function w(){o.value[f.value].declaredStatus=!o.value[f.value].declaredStatus}function Q(){o.value[f.value].openingStatus=!o.value[f.value].openingStatus}function X(){L(f),D()}function ee(n){n&&(o.value.sort((g,e)=>{const m=g[n],d=e[n];return m>d?_.value?-1:1:m<d?_.value?1:-1:0}),_.value=!_.value)}return W(S,n=>{o.value=o.value.map(g=>(g.selected=n,g))}),ye(k,D),(n,g)=>(i(),p(U,null,[t(o)?(i(),O(t(_e),{key:0},{default:a(()=>[l(t(N),{class:"row_header"},{default:a(()=>[l(t(s),null,{default:a(()=>[V(h("input",{type:"checkbox","onUpdate:modelValue":g[0]||(g[0]=e=>S.value=e)},null,512),[[Y,S.value]])]),_:1}),(i(!0),p(U,null,A(t(Be),e=>(i(),O(t(s),{key:e.id,align:e==null?void 0:e.align,onClick:()=>ee(e.key)},{default:a(()=>[h("span",null,r(e.text),1)]),_:2},1032,["align","onClick"]))),128))]),_:1}),(i(!0),p(U,null,A(t(o),(e,m)=>(i(),p(U,{key:e.id},[l(t(N),{class:P({"row_open row_bold":e.show,[b(e)]:e.reqStatus})},{default:a(()=>[l(t(s),null,{default:a(()=>[V(h("input",{type:"checkbox","onUpdate:modelValue":d=>e.selected=d},null,8,Te),[[Y,e.selected]])]),_:2},1024),l(t(s),{class:P({column_icon:e.orders.length>1})},{default:a(()=>[e.orders.length>1?(i(),O(t(Pe),{key:0,class:P({"arrow-bottom":e.show}),onClick:()=>x(e)},null,8,["class","onClick"])):T("",!0)]),_:2},1032,["class"]),l(t(s),null,{default:a(()=>[c(r(m+1),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(e.numberOrder),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(e.project),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(e.fio),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(e.phone),1)]),_:2},1024),l(t(s),{align:"right"},{default:a(()=>[c(r(M(e.orders)),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(e.comment),1)]),_:2},1024),l(t(s),null,{default:a(()=>[e.isEdit?V((i(),p("input",{key:1,"onUpdate:modelValue":d=>e.dataPackage=d,class:"table__input"},null,8,Re)),[[E,e.dataPackage]]):(i(),p("span",$e,r(e.dataPackage),1))]),_:2},1024),l(t(s),{align:"center"},{default:a(()=>[e.isEdit?V((i(),p("input",{key:1,"onUpdate:modelValue":d=>e.typeTransfer=d,class:"table__input"},null,8,Ze)),[[E,e.typeTransfer]]):(i(),p("span",De,r(e.typeTransfer),1))]),_:2},1024),l(t(s),{align:"center"},{default:a(()=>[c(r(e.openingStatus?"Да":"Нет"),1)]),_:2},1024),l(t(s),{align:"right"},{default:a(()=>[c(r(e.deliverySum),1)]),_:2},1024),l(t(s),{align:"right"},{default:a(()=>[e.isEdit?V((i(),p("input",{key:1,"onUpdate:modelValue":d=>e.paySum=d,class:"table__input"},null,8,Fe)),[[E,e.paySum]]):(i(),p("span",je,r(e.paySum),1))]),_:2},1024),l(t(s),{align:"right"},{default:a(()=>[c(r(I(M(e.orders),e.declaredStatus)),1)]),_:2},1024),l(t(s),{align:"center"},{default:a(()=>[e.isEdit?V((i(),p("input",{key:1,"onUpdate:modelValue":d=>e.departurePointCode=d,class:"table__input"},null,8,Ae)),[[E,e.departurePointCode]]):(i(),p("span",qe,r(e.departurePointCode),1))]),_:2},1024),l(t(s),{align:"center"},{default:a(()=>[e.isEdit?V((i(),p("input",{key:1,"onUpdate:modelValue":d=>e.codePWZ=d,class:"table__input"},null,8,We)),[[E,e.codePWZ]]):(i(),p("span",Ne,r(e.codePWZ),1))]),_:2},1024),l(t(s),null,{default:a(()=>[e.isEdit?V((i(),p("input",{key:1,"onUpdate:modelValue":d=>e.weightPackage=d,class:"table__input"},null,8,He)),[[E,e.weightPackage]]):(i(),p("span",ze,r(e.weightPackage),1))]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(e.reqStatus),1)]),_:2},1024),l(t(s),{align:"center",class:"column_icon"},{default:a(()=>[e.isEdit?(i(),O(t(pe),{key:1,onClick:()=>y(m)},null,8,["onClick"])):(i(),O(t(ce),{key:0,onClick:()=>y(m)},null,8,["onClick"]))]),_:2},1024),l(t(s),{align:"center",class:"column_icon"},{default:a(()=>[h("span",{class:"pi pi-ellipsis-h icon",onClick:ue(d=>R(d,m),["stop"])},null,8,Ge)]),_:2},1024)]),_:2},1032,["class"]),e.orders.length>1&&e.show?(i(!0),p(U,{key:0},A(e.orders,(d,H)=>(i(),O(t(N),{key:m+d.id,class:P({row_open:e.show})},{default:a(()=>[l(t(s)),l(t(s)),l(t(s),null,{default:a(()=>[c(r(H+1),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(d.numberOrder),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(d.project),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(d.fio),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(d.phone),1)]),_:2},1024),l(t(s),{align:"right"},{default:a(()=>[c(r(d.sumOrder),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(d.comment),1)]),_:2},1024),l(t(s),{align:"center"},{default:a(()=>[c("-")]),_:1}),l(t(s),{align:"center"},{default:a(()=>[c("-")]),_:1}),l(t(s),{align:"right"},{default:a(()=>[c("-")]),_:1}),l(t(s),{align:"right"},{default:a(()=>[c("-")]),_:1}),l(t(s),{align:"right"},{default:a(()=>[c("-")]),_:1}),l(t(s),{align:"center"},{default:a(()=>[c(r(d.departurePointCode),1)]),_:2},1024),l(t(s),{align:"center"},{default:a(()=>[c(r(d.codePWZ),1)]),_:2},1024),l(t(s),null,{default:a(()=>[c(r(d.weightPackage),1)]),_:2},1024),l(t(s)),l(t(s),{align:"center"}),l(t(s),{align:"center",class:"column_icon"},{default:a(()=>[l(t(Me),{onClick:()=>L(m,H)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class"]))),128)):T("",!0)],64))),128))]),_:1})):T("",!0),v.isOpen?(i(),p("div",{key:1,class:"table-menu",ref_key:"menuRef",ref:k,style:ie(C.value)},[h("div",{class:"table-menu__item",onClick:w},[h("span",{class:P(["table-menu__icon pi",{"pi-times":!v.declaredStatus,"pi-check":v.declaredStatus}])},null,2),Ye]),h("div",{class:"table-menu__item",onClick:Q},[h("span",{class:P(["table-menu__icon pi",{"pi-times":!v.openingStatus,"pi-check":v.openingStatus}])},null,2),Je]),Ke,h("div",{class:"table-menu__item table-menu__item_trash",onClick:X},et)],4)):T("",!0)],64))}},lt=q(tt,[["__scopeId","data-v-8cbac76d"]]),ot={__name:"MainPage",setup(u){return(o,_)=>(i(),p(U,null,[l(ke),l(lt)],64))}};export{ot as default};
