import{s as X,R as ee,r as le,w,o as c,c as _,a as h,m as M,b as te,d as $,n as I,t as d,_ as D,e as j,f as J,g as A,h as H,i as l,u as e,j as F,k as K,l as ne,p as N,q as ae,v as B,x as a,y as G,z as s,F as T,A as Y,B as U,C as se,D as ue,E as oe,G as ie}from"./index-f35b3a15.js";import{R as x,C as t,E as de,S as ce,T as re}from"./Save-ef57808a.js";var W={name:"ToggleButton",extends:X,emits:["update:modelValue","change","click","focus","blur"],props:{modelValue:Boolean,onIcon:String,offIcon:String,onLabel:{type:String,default:"Yes"},offLabel:{type:String,default:"No"},iconPos:{type:String,default:"left"},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},outsideClickListener:null,data(){return{focused:!1}},mounted(){this.bindOutsideClickListener()},beforeUnmount(){this.unbindOutsideClickListener()},methods:{onClick(i){this.disabled||(this.$emit("update:modelValue",!this.modelValue),this.$emit("change",i),this.$emit("click",i),this.focused=!0)},onFocus(i){this.focused=!0,this.$emit("focus",i)},onBlur(i){this.focused=!1,this.$emit("blur",i)},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=i=>{this.focused&&!this.$refs.container.contains(i.target)&&(this.focused=!1)},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}},computed:{buttonClass(){return["p-button p-togglebutton p-component",{"p-focus":this.focused,"p-button-icon-only":this.hasIcon&&!this.hasLabel,"p-disabled":this.disabled,"p-highlight":this.modelValue===!0}]},iconClass(){return[this.modelValue?this.onIcon:this.offIcon,"p-button-icon",{"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label}]},hasLabel(){return this.onLabel&&this.onLabel.length>0&&this.offLabel&&this.offLabel.length>0},hasIcon(){return this.$slots.icon||this.onIcon&&this.offIcon},label(){return this.hasLabel?this.modelValue?this.onLabel:this.offLabel:"&nbsp;"}},directives:{ripple:ee}};const _e=["id","checked","value","aria-labelledby","aria-label"];function pe(i,o,f,b,m,p){const V=le("ripple");return w((c(),_("div",M({ref:"container",class:p.buttonClass,onClick:o[2]||(o[2]=y=>p.onClick(y))},i.ptm("root")),[h("span",M({class:"p-hidden-accessible"},i.ptm("hiddenInputWrapper")),[h("input",M({id:f.inputId,type:"checkbox",role:"switch",class:f.inputClass,style:f.inputStyle,checked:f.modelValue,value:f.modelValue,"aria-labelledby":i.ariaLabelledby,"aria-label":i.ariaLabel,onFocus:o[0]||(o[0]=y=>p.onFocus(y)),onBlur:o[1]||(o[1]=y=>p.onBlur(y))},{...f.inputProps,...i.ptm("hiddenInput")}),null,16,_e)],16),te(i.$slots,"icon",{value:f.modelValue,class:I(p.iconClass)},()=>[f.onIcon||f.offIcon?(c(),_("span",M({key:0,class:p.iconClass},i.ptm("icon")),null,16)):$("",!0)]),h("span",M({class:"p-button-label"},i.ptm("label")),d(p.label),17)],16)),[[V]])}W.render=pe;const fe={class:"search"},he={class:"search__item"},ge={class:"search__item"},ve={__name:"Search",setup(i){const{fetchFilter:o,searchData:f,filterProject:b,selectedFilterProjects:m,filterStatus:p,selectedFilterStatus:V,isLoadingSearch:y,declaredModel:L,openingModel:P,orders:k}=K,Z=j(()=>!!k.value);return J(async()=>{await o()}),A(L,O=>{k.value&&(k.value=k.value.map(v=>(v.declaredStatus=O,v)))}),A(P,O=>{k.value&&(k.value=k.value.map(v=>(v.openingStatus=O,v)))}),(O,v)=>{const E=H("MultiSelect"),q=H("Button");return c(),_("div",fe,[h("div",he,[l(E,{modelValue:e(m),"onUpdate:modelValue":v[0]||(v[0]=S=>F(m)?m.value=S:null),options:e(b),filter:"",optionLabel:"name",placeholder:"Выберите проект",maxSelectedLabels:3,class:"prime__multiselect w-full md:w-20rem"},null,8,["modelValue","options"]),l(E,{modelValue:e(V),"onUpdate:modelValue":v[1]||(v[1]=S=>F(V)?V.value=S:null),options:e(p),filter:"",optionLabel:"name",placeholder:"Выберите статус",maxSelectedLabels:3,class:"prime__multiselect w-full md:w-20rem"},null,8,["modelValue","options"]),l(q,{type:"button",label:"Найти",icon:"pi pi-search",class:"prime__button",onClick:e(f),loading:e(y)},null,8,["onClick","loading"])]),h("div",ge,[l(e(W),{modelValue:e(L),"onUpdate:modelValue":v[2]||(v[2]=S=>F(L)?L.value=S:null),onLabel:"Объявленная стоимость",offLabel:"Объявленная стоимость",onIcon:"pi pi-check",offIcon:"pi pi-times",class:"w-9rem",disabled:!Z.value},null,8,["modelValue","disabled"]),l(e(W),{modelValue:e(P),"onUpdate:modelValue":v[3]||(v[3]=S=>F(P)?P.value=S:null),onLabel:"Вскрытие при получении",offLabel:"Вскрытие при получении",onIcon:"pi pi-check",offIcon:"pi pi-times",class:"w-9rem",disabled:!Z.value},null,8,["modelValue","disabled"])])])}}},me=D(ve,[["__scopeId","data-v-2f20bc73"]]);function be(i,o){if(!i)return;const f=b=>{b.target==i.value||b.composedPath().includes(i.value)||typeof o=="function"&&o()};return J(()=>{window.addEventListener("click",f)}),ne(()=>{window.removeEventListener("click",f)}),{listener:f}}const ke={},ye={xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24"},Se=h("path",{d:"M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"},null,-1),Ce=[Se];function we(i,o){return c(),_("svg",ye,Ce)}const Ve=D(ke,[["render",we]]),Le={},Pe={xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24"},Ie=h("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"},null,-1),Oe=[Ie];function Ue(i,o){return c(),_("svg",Pe,Oe)}const Ee=D(Le,[["render",Ue]]);const R=i=>(oe("data-v-5969b87e"),i=i(),ie(),i),Me=["onUpdate:modelValue"],Be={key:0},$e=["onUpdate:modelValue"],Te={key:0},Re=["onUpdate:modelValue"],Ze={key:0},Fe=["onUpdate:modelValue"],je={key:0},De=["onUpdate:modelValue"],qe={key:0},Ne=["onUpdate:modelValue"],xe={key:0},Ae=["onUpdate:modelValue"],We=["onClick"],ze=R(()=>h("span",null,"Объявленная стоимость",-1)),He=R(()=>h("span",null,"Вскрытие при получении",-1)),Ge=R(()=>h("div",{class:"table-menu__split"},null,-1)),Ye=R(()=>h("span",{class:"table-menu__icon pi pi-trash"},null,-1)),Je=R(()=>h("span",null,"Удалить",-1)),Ke=[Ye,Je],Qe={__name:"TableOrders",setup(i){const{orders:o}=K,f=N(!1),b=N(null),m=N(-1),p=ae({declaredStatus:j(()=>{var u;return m.value>-1&&((u=o.value[m.value])==null?void 0:u.declaredStatus)}),openingStatus:j(()=>{var u;return m.value>-1&&((u=o.value[m.value])==null?void 0:u.openingStatus)}),coordinates:{x:0,y:0},isOpen:!1}),V=j(()=>{var u;return{top:`${p.coordinates.y}px`,left:`${p.coordinates.x-((u=b==null?void 0:b.value)==null?void 0:u.offsetWidth)+24}px`}});function y(u){u.show=!u.show}function L(u,g=null){if(g!==null){const n=o.value[u].orders.splice(g,1);o.value[u].id===n[0].id&&Object.keys(o.value[u].orders[0]).map(C=>{o.value[u][C]=o.value[u].orders[0][C]}),o.value[u].orders.length===1&&(o.value[u].show=!1);return}o.value.splice(u,1)}function P(u,g=null){return g!==null?o.value[u].orders[g].isEdit=!o.value[u].orders[g].isEdit:o.value[u].isEdit=!o.value[u].isEdit}function k(u){return u.length>1?u.reduce((g,n)=>g+=n.sumOrder,0):u[0].sumOrder}function Z(u,g){return g||u>1e4?u:5}function O(u){return u.reqStatus?u.reqStatus=="Ок"?"succefully":"warning":null}function v(u,g){const n=u.target.getBoundingClientRect();p.coordinates.x=n.x,p.coordinates.y=n.y,p.isOpen=!0,m.value=g}function E(){p.isOpen=!1}function q(){o.value[m.value].declaredStatus=!o.value[m.value].declaredStatus}function S(){o.value[m.value].openingStatus=!o.value[m.value].openingStatus}function Q(){L(m),E()}return A(f,u=>{o.value=o.value.map(g=>(g.selected=u,g))}),be(b,E),(u,g)=>(c(),_(T,null,[e(o)?(c(),B(e(re),{key:0},{default:a(()=>[l(e(x),{class:"row_header"},{default:a(()=>[l(e(t),null,{default:a(()=>[w(h("input",{type:"checkbox","onUpdate:modelValue":g[0]||(g[0]=n=>f.value=n)},null,512),[[G,f.value]])]),_:1}),l(e(t)),l(e(t),null,{default:a(()=>[s("№")]),_:1}),l(e(t),null,{default:a(()=>[s("Номер заказа")]),_:1}),l(e(t),null,{default:a(()=>[s("Проект")]),_:1}),l(e(t),null,{default:a(()=>[s("ФИО")]),_:1}),l(e(t),null,{default:a(()=>[s("Телефон")]),_:1}),l(e(t),{align:"right"},{default:a(()=>[s("Сумма заказа")]),_:1}),l(e(t),null,{default:a(()=>[s("Комментарий")]),_:1}),l(e(t),null,{default:a(()=>[s("Дата посылки")]),_:1}),l(e(t),{align:"center"},{default:a(()=>[s("Вид доставки")]),_:1}),l(e(t),{align:"center"},{default:a(()=>[s("Вскрытие получаетелем")]),_:1}),l(e(t),{align:"right"},{default:a(()=>[s("Стоимость доставки")]),_:1}),l(e(t),{align:"right"},{default:a(()=>[s("Оплата доставки")]),_:1}),l(e(t),{align:"right"},{default:a(()=>[s("Объявленная стоимость")]),_:1}),l(e(t),{align:"center"},{default:a(()=>[s("Код пункта поступления")]),_:1}),l(e(t),{align:"center"},{default:a(()=>[s("Код ПВЗ")]),_:1}),l(e(t),null,{default:a(()=>[s("Вес 1 места (грамм)")]),_:1}),l(e(t),null,{default:a(()=>[s("Текст Ошибки")]),_:1}),l(e(t)),l(e(t))]),_:1}),(c(!0),_(T,null,Y(e(o),(n,C)=>(c(),_(T,{key:n.id},[l(e(x),{class:I({"row_open row_bold":n.show,[O(n)]:n.reqStatus})},{default:a(()=>[l(e(t),null,{default:a(()=>[w(h("input",{type:"checkbox","onUpdate:modelValue":r=>n.selected=r},null,8,Me),[[G,n.selected]])]),_:2},1024),l(e(t),{class:I({column_icon:n.orders.length>1})},{default:a(()=>[n.orders.length>1?(c(),B(e(Ve),{key:0,class:I({"arrow-bottom":n.show}),onClick:()=>y(n)},null,8,["class","onClick"])):$("",!0)]),_:2},1032,["class"]),l(e(t),null,{default:a(()=>[s(d(C+1),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(n.numberOrder),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(n.project),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(n.fio),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(n.phone),1)]),_:2},1024),l(e(t),{align:"right"},{default:a(()=>[s(d(k(n.orders)),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(n.comment),1)]),_:2},1024),l(e(t),null,{default:a(()=>[n.isEdit?w((c(),_("input",{key:1,"onUpdate:modelValue":r=>n.dataPackage=r,class:"table__input"},null,8,$e)),[[U,n.dataPackage]]):(c(),_("span",Be,d(n.dataPackage),1))]),_:2},1024),l(e(t),{align:"center"},{default:a(()=>[n.isEdit?w((c(),_("input",{key:1,"onUpdate:modelValue":r=>n.typeTransfer=r,class:"table__input"},null,8,Re)),[[U,n.typeTransfer]]):(c(),_("span",Te,d(n.typeTransfer),1))]),_:2},1024),l(e(t),{align:"center"},{default:a(()=>[s(d(n.openingStatus?"Да":"Нет"),1)]),_:2},1024),l(e(t),{align:"right"},{default:a(()=>[s(d(n.deliverySum),1)]),_:2},1024),l(e(t),{align:"right"},{default:a(()=>[n.isEdit?w((c(),_("input",{key:1,"onUpdate:modelValue":r=>n.paySum=r,class:"table__input"},null,8,Fe)),[[U,n.paySum]]):(c(),_("span",Ze,d(n.paySum),1))]),_:2},1024),l(e(t),{align:"right"},{default:a(()=>[s(d(Z(k(n.orders),n.declaredStatus)),1)]),_:2},1024),l(e(t),{align:"center"},{default:a(()=>[n.isEdit?w((c(),_("input",{key:1,"onUpdate:modelValue":r=>n.departurePointCode=r,class:"table__input"},null,8,De)),[[U,n.departurePointCode]]):(c(),_("span",je,d(n.departurePointCode),1))]),_:2},1024),l(e(t),{align:"center"},{default:a(()=>[n.isEdit?w((c(),_("input",{key:1,"onUpdate:modelValue":r=>n.codePWZ=r,class:"table__input"},null,8,Ne)),[[U,n.codePWZ]]):(c(),_("span",qe,d(n.codePWZ),1))]),_:2},1024),l(e(t),null,{default:a(()=>[n.isEdit?w((c(),_("input",{key:1,"onUpdate:modelValue":r=>n.weightPackage=r,class:"table__input"},null,8,Ae)),[[U,n.weightPackage]]):(c(),_("span",xe,d(n.weightPackage),1))]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(n.reqStatus),1)]),_:2},1024),l(e(t),{align:"center",class:"column_icon"},{default:a(()=>[n.isEdit?(c(),B(e(ce),{key:1,onClick:()=>P(C)},null,8,["onClick"])):(c(),B(e(de),{key:0,onClick:()=>P(C)},null,8,["onClick"]))]),_:2},1024),l(e(t),{align:"center",class:"column_icon"},{default:a(()=>[h("span",{class:"pi pi-ellipsis-h icon",onClick:se(r=>v(r,C),["stop"])},null,8,We)]),_:2},1024)]),_:2},1032,["class"]),n.orders.length>1&&n.show?(c(!0),_(T,{key:0},Y(n.orders,(r,z)=>(c(),B(e(x),{key:C+r.id,class:I({row_open:n.show})},{default:a(()=>[l(e(t)),l(e(t),null,{default:a(()=>[s(d(z+1),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(r.numberOrder),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(r.project),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(r.fio),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(r.phone),1)]),_:2},1024),l(e(t),{align:"right"},{default:a(()=>[s(d(r.sumOrder),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(r.comment),1)]),_:2},1024),l(e(t),{align:"center"},{default:a(()=>[s("-")]),_:1}),l(e(t),{align:"center"},{default:a(()=>[s("-")]),_:1}),l(e(t),{align:"right"},{default:a(()=>[s("-")]),_:1}),l(e(t),{align:"right"},{default:a(()=>[s("-")]),_:1}),l(e(t),{align:"right"},{default:a(()=>[s("-")]),_:1}),l(e(t),{align:"center"},{default:a(()=>[s(d(r.departurePointCode),1)]),_:2},1024),l(e(t),{align:"center"},{default:a(()=>[s(d(r.codePWZ),1)]),_:2},1024),l(e(t),null,{default:a(()=>[s(d(r.weightPackage),1)]),_:2},1024),l(e(t)),l(e(t),{align:"center"}),l(e(t),{align:"center",class:"column_icon"},{default:a(()=>[l(e(Ee),{onClick:()=>L(C,z)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class"]))),128)):$("",!0)],64))),128))]),_:1})):$("",!0),p.isOpen?(c(),_("div",{key:1,class:"table-menu",ref_key:"menuRef",ref:b,style:ue(V.value)},[h("div",{class:"table-menu__item",onClick:q},[h("span",{class:I(["table-menu__icon pi",{"pi-times":!p.declaredStatus,"pi-check":p.declaredStatus}])},null,2),ze]),h("div",{class:"table-menu__item",onClick:S},[h("span",{class:I(["table-menu__icon pi",{"pi-times":!p.openingStatus,"pi-check":p.openingStatus}])},null,2),He]),Ge,h("div",{class:"table-menu__item table-menu__item_trash",onClick:Q},Ke)],4)):$("",!0)],64))}},Xe=D(Qe,[["__scopeId","data-v-5969b87e"]]),tl={__name:"MainPage",setup(i){return(o,f)=>(c(),_(T,null,[l(me),l(Xe)],64))}};export{tl as default};
